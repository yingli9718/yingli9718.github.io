!function i(a,s,u){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return c(a[t][1][e]||e)},o,o.exports,i,a,s,u)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";var o=[],a=function(e,t){var n=document.head||document.getElementsByTagName("head")[0],r=o[o.length-1];if((t=t||{}).insertAt=t.insertAt||"bottom","top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),o.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}};t.exports={createLink:function(e,t){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("link");for(var o in r.href=e,r.rel="stylesheet",t)if(t.hasOwnProperty(o)){var i=t[o];r.setAttribute("data-"+o,i)}n.appendChild(r)},createStyle:function(e,t,n){n=n||{};var r=document.createElement("style");for(var o in r.type="text/css",t)if(t.hasOwnProperty(o)){var i=t[o];r.setAttribute("data-"+o,i)}r.sheet?(r.innerHTML=e,r.sheet.cssText=e,a(r,{insertAt:n.insertAt})):r.styleSheet?(a(r,{insertAt:n.insertAt}),r.styleSheet.cssText=e):(r.appendChild(document.createTextNode(e)),a(r,{insertAt:n.insertAt}))}}},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HelpersStatic=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=e("../config/config.js");n.HelpersStatic=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"loadCss",value:function(r){return new Promise(function(e,t){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=s.config.widgetUrl+r,n.onload=e,n.onerror=t,document.getElementsByTagName("head")[0].appendChild(n)})}},{key:"loadScript",value:function(i,a){return new Promise(function(e,t){var n=document.createElement("script");n.src=s.config.widgetUrl+i;var r=a&&a.data;if(r)for(var o in r)r.hasOwnProperty(o)&&(n.dataset[o]=r[o]);a&&a.async&&(n.async=!0),a&&a.defer&&(n.defer=!0),n.onreadystatechange=e,n.onload=e,n.onerror=t,document.getElementsByTagName("body")[0].appendChild(n)})}},{key:"calcRandColor",value:function(e){if(e){var t="abcdefghijklmnopqrstuvwxyz".indexOf(e[0].toLowerCase())+1;return 4<t&&t<=8?"darkred":8<t&&t<=12?"blueviolet":12<t&&t<=16?"darkslategray":16<t&&t<=20?"yellowgreen":20<t&&t<=24?"dodgerblue":24<t&&t<=29?"palevioletred":"orange"}}},{key:"calcRand",value:function(e){var t=e[0],n=e[1];return Math.floor(Math.random().toFixed(1)*(n-t))+t}},{key:"randomizeArray",value:function(e){return e&&e.sort(function(e,t){return.5-Math.random()})}},{key:"linkify",value:function(e){return e&&e.replace(/(^|[^(?:=">)]|<\w+>|<\/\w+>)(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*))/gi,'$1<a href="$2" target="_blank">$2</a>')}}]),e}()},{"../config/config.js":5}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Log=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../config/config.js");n.Log=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"message",value:function(){if(o.config&&!o.config.production){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t&&t.length&&(t.unshift("Status.net widget log: "),console.log.apply(null,t))}}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t&&t.length&&(t.unshift("Status.net widget error: "),console.error.apply(null,t))}}]),e}()},{"../config/config.js":5}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RestApi=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../config/config.js");n.RestApi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.host=o.config.apiUrl,this.headers=new Headers({"content-type":"application/json"})}return r(e,[{key:"getWidget",value:function(n,e){var r=this;if(!n)return Promise.reject(new Error("rest-api > getWidget: widget id undefined"));var o=this.host+"/widgets/"+n+"?$sort=%7B%22createdAt%22:-1%7D";return e&&(e.limit&&(o+="&$limit="+e.limit),e.skip&&(o+="&$skip="+e.skip)),new Promise(function(e,t){fetch(o,{method:"GET",headers:r.headers}).then(function(e){if(200===e.status)return e.json();throw new Error(e.statusText)}).then(e).catch(function(e){t(new Error("Widget data loading error "+n+" error: ",e))})})}}]),e}()},{"../config/config.js":5}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.config={production:!0,widgetUrl:"https://wg.status.net",apiUrl:"https://api.status.net",appUrl:"https://app.status.net"}},{}],6:[function(e,t,n){var r="@import url(https://fonts.googleapis.com/css?family=Muli:100,200,300,400,500,600,700,800,900);/*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}#sprWdgt{position:fixed;left:24px;bottom:24px;width:288px;min-height:48px}";e("browserify-css").createStyle(r,{href:"src/widgets/widget.css"},{insertAt:"bottom"}),t.exports=r},{"browserify-css":1}],7:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../common/rest-api"),i=e("../common/helpers.js"),a=e("../common/log.js");e("./widget.css");var s=1;(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(){var e=document.currentScript&&document.currentScript.dataset,t=e&&e.id;if(!t)return a.Log.error("data-id is required attribute");(new o.RestApi).getWidget(t).then(function(e){if(!e)return a.Log.error("Widget with id "+t+" is absent");if(!e.widget)return a.Log.error("Widget data undefined");if(!e.updates||!e.updates.data)return a.Log.error("Updates undefined for widget");switch(e.widget.type){case s:i.HelpersStatic.loadScript("/updates-popup.js",{async:!0}).then(function(){if(!window.SprWidgetsUpdatesPopup)return a.Log.error("Updates popup widget class undefined");new window.SprWidgetsUpdatesPopup(e.widget,e.updates).init()});break;default:return a.Log.error("Incorrect widget type",e.widget.type)}}).catch(function(e){return a.Log.error(e)})}}]),e}())).init()},{"../common/helpers.js":2,"../common/log.js":3,"../common/rest-api":4,"./widget.css":6}]},{},[7]);